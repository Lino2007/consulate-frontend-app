<app-dashboard-horizontal-menu></app-dashboard-horizontal-menu>

<div class="elements">
  <app-dashboard-vertical-menu></app-dashboard-vertical-menu>
  <div *ngIf="!update">
    <h1 class="page-title" >Users</h1>
    <p-table [value]="users" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" responsiveLayout="scroll"
             currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]">
      <ng-template pTemplate="header">
        <tr>
          <th>Name</th>
          <th>Surname</th>
          <th>Email</th>
          <th>Gender</th>
          <th>Place of birth</th>
          <th>Country</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-users>
        <tr>
          <td>{{users.firstName}}</td>
          <td>{{users.lastName}}</td>
          <td>{{users.email}}</td>
          <td>{{users.gender}}</td>
          <td>{{users.placeOfBirth}}</td>
          <td>{{users.country}}</td>
          <td>
            <button class="btn btn-primary add-role-btn" type="button" (click)="updateUser(users)">Update</button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <div *ngIf="update">
    <button class="btn btn-primary mt-3 ml-8 w-25" type="button" (click)="cancelUpdate()" >Cancel</button>
    <h1 class="page-title" >Users</h1>
    <div class="update-content">
      <h1 class="text-center">Update user</h1>
      <label class="labels ml-5 mb-2">Selected user</label>
      <input type="text" class="selected-role form-control mb-3" [value]="selectedUserName" readonly>

      <p-table class="table" [value]="roles" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th colspan="2">Roles</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-role>
          <tr>
            <td>{{role.name}}</td>
            <td>
              <button *ngIf="!validateEmployeeRole(role.id)" class="btn btn-primary add-role-btn" type="button" (click)="addRole(role)">Add</button>
              <button *ngIf="validateEmployeeRole(role.id)" class="btn btn-primary add-role-btn deleteButton" type="button" (click)="deleteRole(role)" >Delete</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="saveBtn">
        <button class="btn btn-primary add-role-btn mt-4 mb-6 w-25" type="button" (click)="save()" >Save</button>
      </div>
    </div>
  </div>
</div>
